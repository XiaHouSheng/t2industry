import{q as ge,r as R,s as Ce,k as se,g as n,c as w,o as f,h as t,w as l,i as c,b as e,f as U,v as Be,j as G,x as ce,u as s,y as ue,t as A,a as W,z as Re,A as he,B as ye,C as Te,F as X,p as F,D as ke,E as Ve,G as Pe,H as Ge,I as qe,J as De,K as fe,L as ze,M as B,N as xe,O as Oe,P as We,Q as je,R as Xe,S as Ye,T as Fe,U as Ne,n as re,V as we,W as He,X as Ke}from"./vendor-CMJEODZ-.js";import{b as pe,u as Je,c as Ze}from"./stores-raqoz5H4.js";import{_ as ne,R as et,W as tt}from"./components-BH4rAH7j.js";import{b as de,c as lt,d as ot,g as st,i as be,C as oe}from"./utils-BUFnZnRQ.js";const nt={class:"sheng-root-container"},at={class:"display-flex flex-direation-col justify-content-center"},ps={__name:"root",setup(le){const r=ge(),d=R("/home");return Ce(()=>r.path,m=>{const D="/"+m.split("/")[1];d.value=D}),se(()=>{const m="/"+r.path.split("/")[1];d.value=m}),(m,D)=>{const q=n("el-menu-item"),T=n("el-menu"),k=n("RouterView"),x=n("el-main"),o=n("el-divider"),z=n("el-text"),E=n("el-footer"),I=n("el-container");return f(),w("div",nt,[t(T,{mode:"horizontal",ellipsis:!1,router:!0,"default-active":d.value},{default:l(()=>[t(q,{index:"/home"},{default:l(()=>[...D[0]||(D[0]=[c("T2Blueprint",-1)])]),_:1}),t(q,{index:"/editor"},{default:l(()=>[...D[1]||(D[1]=[c("蓝图编辑",-1)])]),_:1}),t(q,{index:"/calculate"},{default:l(()=>[...D[2]||(D[2]=[c("计算器",-1)])]),_:1})]),_:1},8,["default-active"]),t(I,null,{default:l(()=>[t(x,null,{default:l(()=>[t(k)]),_:1}),t(E,null,{default:l(()=>[t(o,{style:{margin:"0 0 12px 0"}}),e("div",at,[t(z,null,{default:l(()=>[...D[3]||(D[3]=[c("T2Blueprint | 基于 Vue3 + Element Plus + Gridstack.js 开发 | MIT 开源协议",-1)])]),_:1}),t(z,null,{default:l(()=>[...D[4]||(D[4]=[c("网站备案/许可证号 ",-1),e("a",{href:"https://beian.miit.gov.cn/"}," 粤ICP备2026009977号",-1)])]),_:1})])]),_:1})]),_:1})])}}},it={class:"sheng-side-menu test-border display-flex flex-direation-col"},rt={class:"sheng-menu-header display-flex flex-direation-col p-4 bg-gradient-to-r from-blue-500 to-blue-700 text-white rounded-lg shadow-md"},dt={class:"display-flex flex-direation-row align-items-center justify-content-center mb-3"},ut={class:"display-flex flex-direation-col align-items-center"},ct={key:4,class:"w-full bg-blue-700 bg-opacity-50 rounded-full h-1 mt-1 mb-1"},pt={key:5,class:"w-full display-flex flex-direation-row justify-content-center gap-2"},mt={class:"sheng-menu"},gt={class:"sheng-menu-item"},ft={style:{"margin-top":"auto"},class:"sheng-login-cont display-flex flex-direation-column justify-content-center gap-2"},vt={style:{padding:"0 20px"}},_t={style:{"margin-bottom":"20px"}},At={style:{"margin-bottom":"20px"}},ht={key:0,style:{"margin-bottom":"20px"}},yt={style:{padding:"0 20px"}},xt={style:{"margin-bottom":"20px"}},wt={style:{"margin-bottom":"20px"}},bt={style:{"margin-bottom":"20px"}},Ct={style:{"margin-bottom":"20px"}},Bt={style:{"margin-bottom":"20px"}},kt={style:{"margin-bottom":"20px"}},Vt={key:0,style:{"margin-bottom":"20px"}},Dt={class:"sheng-home-main display-flex flex-direation-col test-border"},zt={class:"display-flex flex-direation-row"},St={class:"display-flex flex-direation-col justify-content-center",style:{"margin-left":"12px","padding-top":"2px"}},Ut={class:"sheng-main-header display-flex flex-direation-col justify-content-center"},Et={style:{margin:"0"}},Mt={class:"sheng-child-main flex-grow-1"},It={__name:"home",setup(le){const r=ce(),d=ge(),m=pe(),D=U(()=>d.path),q=U(()=>{switch(d.path){case"/home":return"蓝图中枢 - HUB";case"/home/discover":return"发现蓝图 - DISCOVER";case"/home/self":return"个人蓝图 - SELF";default:return"我的"}}),T=R(!1),k=R(!1);R(!0);const x=R({username:"",password:""}),o=R({username:"",password:"",confirmPassword:"",nickname:"",email:"",verificationCode:""}),z=R(!1),E=R(!1),I=R(""),V=R(""),L=a=>{r.push(a)},b=()=>{T.value=!0,I.value=""},u=()=>{T.value=!1,I.value=""},P=()=>{k.value=!0,V.value=""},S=()=>{k.value=!1,V.value=""},h=async()=>{try{z.value=!0,I.value="";const a=await m.login(x.value);u(),await m.refreshData()}catch(a){I.value=a.message||"登录失败",console.error("登录失败:",a)}finally{z.value=!1}},_=async()=>{try{if(!o.value.email){V.value="请输入邮箱";return}V.value="";const a=await m.sendVerificationCode(o.value.email);V.value=a.message}catch(a){V.value=a.message||"发送验证码失败",console.error("发送验证码失败:",a)}},Y=async()=>{try{if(o.value.password!==o.value.confirmPassword){V.value="两次输入的密码不一致";return}if(!o.value.username||!o.value.password||!o.value.email||!o.value.verificationCode||!o.value.nickname){V.value="请填写所有必要字段";return}E.value=!0,V.value="";const a=await m.register({username:o.value.username,password:o.value.password,nickname:o.value.nickname,email:o.value.email,verificationCode:o.value.verificationCode});S(),I.value="注册成功，请登录",b(),o.value={username:"",password:"",confirmPassword:"",nickname:"",email:"",verificationCode:""},m.clearCountdown()}catch(a){V.value=a.message||"注册失败",console.error("注册失败:",a)}finally{E.value=!1}},H=async()=>{m.checkLoginStatus(),await m.refreshData()};return se(()=>{H()}),Be(()=>{m.clearCountdown()}),(a,p)=>{const O=n("el-avatar"),j=n("el-text"),ee=n("el-tag"),Q=n("el-icon"),C=n("el-menu-item"),J=n("el-menu"),K=n("el-button"),g=n("el-input"),i=n("el-alert"),$=n("el-dialog"),Z=n("el-col"),y=n("router-view"),te=n("el-row");return f(),G(te,{gutter:6},{default:l(()=>[t(Z,{span:4},{default:l(()=>[e("div",it,[e("div",rt,[e("div",dt,[t(O,{size:"large",icon:s(ue),src:null,class:"bg-white text-blue-600"},{default:l(()=>[c(A(s(m).userInfo.avatar),1)]),_:1},8,["icon"])]),e("div",ut,[s(m).userInfo.isLoggedIn?(f(),G(j,{key:0,class:"font-bold text-lg mb-1"},{default:l(()=>[c(A(s(m).userInfo.username),1)]),_:1})):(f(),G(j,{key:1,class:"font-bold text-lg mb-1"},{default:l(()=>[...p[10]||(p[10]=[c("未登录",-1)])]),_:1})),s(m).userInfo.isLoggedIn?(f(),G(j,{key:2,size:"small",class:"text-blue-100 mb-2"},{default:l(()=>[c(" ID: "+A(s(m).userInfo.id),1)]),_:1})):(f(),G(j,{key:3,size:"small",class:"text-blue-100 mb-2 text-center"},{default:l(()=>[...p[11]||(p[11]=[c(" 请登录以使用完整功能 ",-1)])]),_:1})),s(m).userInfo.isLoggedIn?(f(),w("div",ct)):W("",!0),s(m).userInfo.isLoggedIn?(f(),w("div",pt,[t(ee,{size:"small",effect:"light",class:"bg-blue-700 text-white"},{default:l(()=>[...p[12]||(p[12]=[c(" 用户 ",-1)])]),_:1})])):W("",!0)])]),e("div",mt,[e("div",gt,[t(J,{"default-active":D.value,onSelect:L},{default:l(()=>[t(C,{index:"/home"},{default:l(()=>[t(Q,null,{default:l(()=>[t(s(Re))]),_:1}),p[13]||(p[13]=e("span",null,"首页",-1))]),_:1}),t(C,{index:"/home/discover"},{default:l(()=>[t(Q,null,{default:l(()=>[t(s(he))]),_:1}),p[14]||(p[14]=e("span",null,"发现蓝图",-1))]),_:1}),t(C,{index:"/home/self"},{default:l(()=>[t(Q,null,{default:l(()=>[t(s(ue))]),_:1}),p[15]||(p[15]=e("span",null,"个人蓝图",-1))]),_:1})]),_:1},8,["default-active"])])]),e("div",ft,[t(K,{color:"blue",onClick:b,style:{width:"100%"}},{default:l(()=>[...p[16]||(p[16]=[c("登录",-1)])]),_:1}),t(K,{color:"blue",onClick:P,style:{width:"100%"}},{default:l(()=>[...p[17]||(p[17]=[c("注册",-1)])]),_:1})]),t($,{modelValue:T.value,"onUpdate:modelValue":p[2]||(p[2]=M=>T.value=M),title:"用户登录",width:"450px","close-on-click-modal":!1},{footer:l(()=>[e("span",null,[t(K,{onClick:u},{default:l(()=>[...p[18]||(p[18]=[c("取消",-1)])]),_:1}),t(K,{type:"primary",loading:z.value,onClick:h},{default:l(()=>[...p[19]||(p[19]=[c(" 登录 ",-1)])]),_:1},8,["loading"])])]),default:l(()=>[e("form",{onSubmit:ye(h,["prevent"])},[e("div",vt,[e("div",_t,[t(g,{modelValue:x.value.username,"onUpdate:modelValue":p[0]||(p[0]=M=>x.value.username=M),placeholder:"请输入用户名","prefix-icon":"User",autocomplete:"username"},null,8,["modelValue"])]),e("div",At,[t(g,{modelValue:x.value.password,"onUpdate:modelValue":p[1]||(p[1]=M=>x.value.password=M),type:"password",placeholder:"请输入密码","prefix-icon":"Lock",autocomplete:"password"},null,8,["modelValue"])]),I.value?(f(),w("div",ht,[t(i,{title:I.value,type:"error",closable:!1,"show-icon":""},null,8,["title"])])):W("",!0)])],32)]),_:1},8,["modelValue"]),t($,{modelValue:k.value,"onUpdate:modelValue":p[9]||(p[9]=M=>k.value=M),title:"用户注册",width:"450px","close-on-click-modal":!1},{footer:l(()=>[e("span",null,[t(K,{onClick:S},{default:l(()=>[...p[20]||(p[20]=[c("取消",-1)])]),_:1}),t(K,{type:"primary",loading:E.value,onClick:Y},{default:l(()=>[...p[21]||(p[21]=[c(" 注册 ",-1)])]),_:1},8,["loading"])])]),default:l(()=>[e("form",{onSubmit:ye(Y,["prevent"])},[e("div",yt,[e("div",xt,[t(g,{modelValue:o.value.username,"onUpdate:modelValue":p[3]||(p[3]=M=>o.value.username=M),placeholder:"请输入用户名","prefix-icon":s(ue),autocomplete:"username"},null,8,["modelValue","prefix-icon"])]),e("div",wt,[t(g,{modelValue:o.value.nickname,"onUpdate:modelValue":p[4]||(p[4]=M=>o.value.nickname=M),placeholder:"请输入昵称","prefix-icon":s(Te),autocomplete:"nickname"},null,8,["modelValue","prefix-icon"])]),e("div",bt,[t(g,{modelValue:o.value.email,"onUpdate:modelValue":p[5]||(p[5]=M=>o.value.email=M),placeholder:"请输入邮箱","prefix-icon":a.Mail,autocomplete:"email"},null,8,["modelValue","prefix-icon"])]),e("div",Ct,[t(g,{modelValue:o.value.verificationCode,"onUpdate:modelValue":p[6]||(p[6]=M=>o.value.verificationCode=M),placeholder:"请输入验证码","prefix-icon":a.Message,autocomplete:"one-time-code"},{append:l(()=>[t(K,{loading:s(m).sendCodeLoading,disabled:s(m).codeCountdown>0,onClick:_},{default:l(()=>[c(A(s(m).codeCountdown>0?`${s(m).codeCountdown}s后重发`:"发送验证码"),1)]),_:1},8,["loading","disabled"])]),_:1},8,["modelValue","prefix-icon"])]),e("div",Bt,[t(g,{modelValue:o.value.password,"onUpdate:modelValue":p[7]||(p[7]=M=>o.value.password=M),type:"password",placeholder:"请输入密码","prefix-icon":a.Lock,autocomplete:"new-password"},null,8,["modelValue","prefix-icon"])]),e("div",kt,[t(g,{modelValue:o.value.confirmPassword,"onUpdate:modelValue":p[8]||(p[8]=M=>o.value.confirmPassword=M),type:"password",placeholder:"请确认密码","prefix-icon":a.Check,autocomplete:"new-password"},null,8,["modelValue","prefix-icon"])]),V.value?(f(),w("div",Vt,[t(i,{title:V.value,type:"error",closable:!1,"show-icon":""},null,8,["title"])])):W("",!0)])],32)]),_:1},8,["modelValue"])])]),_:1}),t(Z,{span:20},{default:l(()=>[e("div",Dt,[e("div",zt,[e("div",St,[t(Q,{size:28},{default:l(()=>[t(s(he))]),_:1})]),e("div",Ut,[e("h2",Et,A(q.value),1)])]),e("div",Mt,[t(y,{onOpenLoginDialog:b})])])]),_:1})]),_:1})}}},Lt=ne(It,[["__scopeId","data-v-895948a8"]]),ms=Object.freeze(Object.defineProperty({__proto__:null,default:Lt},Symbol.toStringTag,{value:"Module"})),Qt={class:"quick-links-section"},$t={class:"quick-links-grid"},Rt=["onClick"],Tt={class:"quick-link-content"},Pt={class:"quick-link-icon"},Gt={class:"quick-link-icon-cont"},qt={class:"quick-link-arrow"},Ot={class:"blueprint-section"},Wt={class:"blueprint-grid"},jt={class:"blueprint-header"},Xt={class:"blueprint-content"},Yt={class:"author-info"},Ft={class:"blueprint-actions"},Nt={key:0,class:"blueprint-grid"},Ht={class:"blueprint-header"},Kt={class:"blueprint-content"},Jt={class:"blueprint-description"},Zt={class:"blueprint-meta"},el={class:"author-info"},tl={class:"blueprint-stats"},ll={class:"blueprint-actions"},ol={key:1,class:"text-center py-8"},sl={class:"stats-section"},nl={class:"stats-grid"},al={class:"stat-content"},il={key:0,class:"stats-grid"},rl={class:"stat-item"},dl={class:"stat-content"},ul={class:"stat-value"},cl={class:"stat-item"},pl={class:"stat-content"},ml={class:"stat-value"},gl={class:"stat-item"},fl={class:"stat-content"},vl={class:"stat-value"},_l={class:"stat-item"},Al={class:"stat-content"},hl={class:"stat-value"},yl={class:"intro-section"},xl={__name:"index",setup(le){const r=pe(),d=ce(),m=U(()=>r.totalBlueprints),D=U(()=>r.totalUsers),q=U(()=>r.totalViews),T=U(()=>r.totalDownloads),k=U(()=>r.hotBlueprints),x=U(()=>r.loading.stats),o=U(()=>r.error);U(()=>{const b={四号谷地:0,武陵:0};return Array.isArray(r.hotBlueprints)&&r.hotBlueprints.forEach(u=>{u.area==="四号谷地"&&b.四号谷地++,u.area==="武陵"&&b.武陵++}),b});const z=[{name:"蓝图编辑器",text:"Edit",path:"/editor",description:"创建和编辑你的蓝图",icon:ke},{name:"发现蓝图",text:"Discover",path:"/home/discover",description:"浏览其他玩家的蓝图",icon:Ve},{name:"个人蓝图",text:"User",path:"/home/self",description:"管理你的蓝图",icon:ue},{name:"计算器",text:"Calculator",path:"/calculate",description:"物料配平计算",icon:Pe}],E=async b=>{try{b.fileHash?(r.getBlueprintById(b.id),d.push(`/editor/${b.fileHash}`)):B.warning("该蓝图缺少文件哈希，无法直接查看")}catch(u){console.error("查看蓝图失败:",u),B.error("操作失败，请重试")}},I=async b=>{},V=b=>{};se(()=>{(!Array.isArray(r.hotBlueprints)||r.hotBlueprints.length===0)&&r.loadStats()});const L=()=>{r.loadStats()};return(b,u)=>{const P=n("el-button"),S=n("el-alert"),h=n("el-icon"),_=n("el-skeleton-item"),Y=n("el-card"),H=n("el-tag"),a=n("el-avatar"),p=n("el-text"),O=n("el-empty"),j=n("el-skeleton"),ee=n("el-col"),Q=n("el-row");return f(),G(Q,{gutter:12},{default:l(()=>[t(ee,{span:24},{default:l(()=>[o.value?(f(),G(S,{key:0,title:o.value,type:"error",closable:!1,"show-icon":"",class:"mb-4",style:{"margin-bottom":"6px"}},{default:l(()=>[t(P,{type:"primary",size:"small",onClick:L},{default:l(()=>[...u[0]||(u[0]=[c("重试",-1)])]),_:1})]),_:1},8,["title"])):W("",!0),e("div",Qt,[e("div",$t,[(f(),w(X,null,F(z,C=>e("div",{key:C.name,class:"quick-link-card",onClick:J=>b.$router.push(C.path)},[e("div",Tt,[e("div",Pt,[t(h,{size:36},{default:l(()=>[c(A(C.text),1)]),_:2},1024),e("div",Gt,[t(h,{size:140},{default:l(()=>[(f(),G(Ge(C.icon)))]),_:2},1024)])]),e("h4",null,A(C.name),1),e("p",null,A(C.description),1),e("div",qt,[t(h,{size:16},{default:l(()=>[t(s(qe))]),_:1})])])],8,Rt)),64))])]),e("div",Ot,[t(j,{loading:x.value,animated:""},{template:l(()=>[e("div",Wt,[(f(),w(X,null,F(4,C=>t(Y,{class:"blueprint-card",key:C},{header:l(()=>[e("div",jt,[t(_,{variant:"text",style:{width:"150px",height:"20px"}}),t(_,{variant:"text",style:{width:"60px",height:"20px"}})])]),default:l(()=>[e("div",Xt,[t(_,{variant:"text",style:{width:"100%",height:"16px","margin-bottom":"8px"}}),t(_,{variant:"text",style:{width:"100%",height:"16px","margin-bottom":"8px"}}),t(_,{variant:"text",style:{width:"80%",height:"16px","margin-bottom":"16px"}}),e("div",Yt,[t(_,{variant:"circle",style:{width:"24px",height:"24px"}}),t(_,{variant:"text",style:{width:"100px",height:"16px","margin-left":"8px"}})]),t(_,{variant:"text",style:{width:"100px",height:"16px","margin-top":"8px"}}),e("div",Ft,[t(_,{variant:"text",style:{width:"80px",height:"32px"}}),t(_,{variant:"text",style:{width:"80px",height:"32px"}}),t(_,{variant:"text",style:{width:"80px",height:"32px"}})])])]),_:1})),64))])]),default:l(()=>[!x.value&&k.value.length>0?(f(),w("div",Nt,[(f(!0),w(X,null,F(k.value,C=>(f(),G(Y,{key:C.id,class:"blueprint-card"},{header:l(()=>[e("div",Ht,[e("h2",null,A(C.name),1),t(H,{size:"small",type:"warning"},{default:l(()=>[c(A(C.area),1)]),_:2},1024)])]),default:l(()=>[e("div",Kt,[e("div",Jt,A(C.description),1),e("div",Zt,[e("div",el,[t(a,{size:24},{default:l(()=>[c(A(C.creator?.name?.charAt(0)||"用户"),1)]),_:2},1024),t(p,{size:"small",style:{"margin-left":"8px"}},{default:l(()=>[c(A(C.creator?.name||"未知作者"),1)]),_:2},1024)]),e("div",tl,[t(p,{size:"small",style:{"margin-right":"10px"}},{default:l(()=>[c(" 浏览: "+A(C.views||0),1)]),_:2},1024),t(p,{size:"small"},{default:l(()=>[c(" 下载: "+A(C.downloads||0),1)]),_:2},1024)])]),e("div",ll,[t(P,{size:"medium",icon:s(De),onClick:J=>E(C),type:"primary"},{default:l(()=>[...u[1]||(u[1]=[c(" 查看 ",-1)])]),_:1},8,["icon","onClick"]),t(P,{size:"medium",icon:s(fe),onClick:J=>I(C),type:"default",plain:""},{default:l(()=>[...u[2]||(u[2]=[c(" 分享 ",-1)])]),_:1},8,["icon","onClick"]),t(P,{size:"medium",icon:s(ze),onClick:J=>V(C),type:"default",plain:""},{default:l(()=>[...u[3]||(u[3]=[c(" B站 ",-1)])]),_:1},8,["icon","onClick"])])])]),_:2},1024))),128))])):!x.value&&k.value.length===0?(f(),w("div",ol,[t(O,{description:"暂无热门蓝图"})])):W("",!0)]),_:1},8,["loading"])]),e("div",sl,[t(Y,{class:"stats-card"},{default:l(()=>[t(j,{loading:x.value,animated:""},{template:l(()=>[e("div",nl,[(f(),w(X,null,F(4,C=>e("div",{class:"stat-item",key:C},[e("div",al,[t(_,{variant:"text",style:{width:"80px",height:"30px"}}),t(_,{variant:"text",style:{width:"100px",height:"16px","margin-top":"8px"}})])])),64))])]),default:l(()=>[x.value?W("",!0):(f(),w("div",il,[e("div",rl,[e("div",dl,[e("div",ul,A(m.value),1),u[4]||(u[4]=e("div",{class:"stat-label"},"总蓝图数",-1))])]),e("div",cl,[e("div",pl,[e("div",ml,A(D.value),1),u[5]||(u[5]=e("div",{class:"stat-label"},"总用户数",-1))])]),e("div",gl,[e("div",fl,[e("div",vl,A(q.value),1),u[6]||(u[6]=e("div",{class:"stat-label"},"总浏览量",-1))])]),e("div",_l,[e("div",Al,[e("div",hl,A(T.value),1),u[7]||(u[7]=e("div",{class:"stat-label"},"总下载量",-1))])])]))]),_:1},8,["loading"])]),_:1})]),e("div",yl,[t(Y,{class:"intro-card"},{header:l(()=>[...u[8]||(u[8]=[e("h3",{style:{margin:"0"}},"关于本站",-1)])]),default:l(()=>[u[9]||(u[9]=e("div",{class:"intro-content"},[e("div",{class:"intro-item"},[e("h4",null,'什么是"塔卫二蓝图"？'),e("p",null," 一款面向《明日方舟：终末地》的多功能工具平台，核心能力包含：蓝图分享与管理、生产效率模拟（计划）。 "),e("p",null," 玩家可以手动通过本站提供的蓝图编辑器进行蓝图编辑并上传，也可以查看其他玩家的蓝图。 "),e("p",null,"站点旨在搭建一个蓝图汇总库以便于玩家进行查找。")]),e("div",{class:"intro-item"},[e("h4",null,"公告"),e("p",null," 目前没有开发管道相关的蓝图编辑功能，但是对于需要管道的机器可以进行配方配置与放置。 ")]),e("div",{class:"intro-item"},[e("h4",null,"联系我们"),e("p",null,[c(" 企鹅群：615187598"),e("br"),c(" 仓库主页："),e("a",{href:"https://github.com/XiaHouSheng/t2industry",target:"_blank"},"https://github.com/XiaHouSheng/t2industry")])]),e("div",{class:"intro-item"},[e("h4",null,"开发团队"),e("p",null,"霞后生")])],-1)),u[10]||(u[10]=e("div",{class:"intro-item"},[e("h4",null,"免责声明"),e("p",null," 本网站/项目为非官方、非商业性质的个人学习与交流项目，与 《明日方舟：终末地》（英文名：Arknights: Endfield）及其著作权方 上海鹰角网络科技有限公司 不存在任何隶属、合作、授权或代言关系。 网站/项目中所涉及的 《明日方舟：终末地》（Arknights: Endfield） 相关名称、角色、图像、音效、世界观及其他知识产权内容，其著作权及相关权利均归 上海鹰角网络科技有限公司 所有，仅用于学习研究、技术展示与爱好交流目的，不构成任何商业用途。 本网站/项目的程序代码部分采用 MIT License（MIT 开源协议） 进行开源，仅对代码本身的使用、复制、修改、合并、发布等行为进行授权； MIT 协议不包含也不代表对任何第三方素材（包括但不限于游戏美术、设定、商标等）的授权。 如相关内容的展示对权利方造成影响或存在不妥之处，请联系作者处理，本站/项目将第一时间进行修改或删除。 ")],-1))]),_:1})])]),_:1})]),_:1})}}},wl=ne(xl,[["__scopeId","data-v-60d28b15"]]),gs=Object.freeze(Object.defineProperty({__proto__:null,default:wl},Symbol.toStringTag,{value:"Module"})),bl={class:"search-filter-section"},Cl={class:"blueprint-section"},Bl={class:"blueprint-grid"},kl={class:"blueprint-header"},Vl={class:"blueprint-content"},Dl={class:"author-info"},zl={class:"blueprint-actions"},Sl={key:0,class:"blueprint-grid"},Ul={class:"blueprint-header"},El={class:"blueprint-content"},Ml={class:"blueprint-description"},Il={class:"blueprint-meta"},Ll={class:"author-info"},Ql={class:"blueprint-stats"},$l={class:"blueprint-actions"},Rl={key:1,class:"empty-state"},Tl={key:0,class:"pagination-container"},Pl={__name:"discover",setup(le){const r=pe(),d=ce(),m=R(["","四号谷地","武陵"]),D=U(()=>r.discoverBlueprints),q=U(()=>r.total),T=U({get:()=>r.currentPage,set:h=>r.setSearchFilters({page:h})}),k=U({get:()=>r.pageSize,set:h=>r.setSearchFilters({pageSize:h})}),x=U({get:()=>r.searchQuery,set:h=>r.setSearchFilters({search:h})}),o=U({get:()=>r.selectedArea,set:h=>r.setSearchFilters({area:h})}),z=U(()=>r.loading.discover),E=U(()=>r.error),I=h=>{r.loadDiscoverBlueprints(h)},V=()=>{r.loadDiscoverBlueprints(1)},L=h=>{r.setSearchFilters({pageSize:h}),r.loadDiscoverBlueprints(1)},b=async h=>{},u=async h=>{try{h.fileHash?(r.getBlueprintById(h.id),d.push(`/editor/${h.fileHash}`)):B.warning("该蓝图缺少文件哈希，无法直接查看")}catch(_){console.error("查看蓝图失败:",_),B.error("操作失败，请重试")}},P=h=>{},S=h=>{if(!h)return"未知时间";try{const _=new Date(h);return`${_.getFullYear()}-${String(_.getMonth()+1).padStart(2,"0")}-${String(_.getDate()).padStart(2,"0")}`}catch{return"未知时间"}};return se(()=>{r.loadDiscoverBlueprints(1)}),(h,_)=>{const Y=n("el-input"),H=n("el-col"),a=n("el-option"),p=n("el-select"),O=n("el-row"),j=n("el-button"),ee=n("el-alert"),Q=n("el-skeleton-item"),C=n("el-card"),J=n("el-tag"),K=n("el-avatar"),g=n("el-text"),i=n("el-empty"),$=n("el-skeleton"),Z=n("el-pagination");return f(),G(O,{gutter:12},{default:l(()=>[t(H,{span:24},{default:l(()=>[e("div",bl,[t(O,{gutter:10},{default:l(()=>[t(H,{span:16},{default:l(()=>[t(Y,{"prefix-icon":s(Ve),modelValue:x.value,"onUpdate:modelValue":_[0]||(_[0]=y=>x.value=y),placeholder:"输入关键字检索蓝图",onInput:V},null,8,["prefix-icon","modelValue"])]),_:1}),t(H,{span:8},{default:l(()=>[t(p,{modelValue:o.value,"onUpdate:modelValue":_[1]||(_[1]=y=>o.value=y),placeholder:"按地区筛选",style:{width:"100%"},onChange:V},{default:l(()=>[(f(!0),w(X,null,F(m.value,y=>(f(),G(a,{key:y,label:y||"全部地区",value:y},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),E.value?(f(),G(ee,{key:0,title:E.value,type:"error",closable:!1,"show-icon":"",class:"mb-4"},{default:l(()=>[t(j,{type:"primary",size:"small",onClick:h.loadBlueprints},{default:l(()=>[..._[4]||(_[4]=[c("重试",-1)])]),_:1},8,["onClick"])]),_:1},8,["title"])):W("",!0),e("div",Cl,[t($,{loading:z.value,animated:""},{template:l(()=>[e("div",Bl,[(f(),w(X,null,F(8,y=>t(C,{class:"blueprint-card",key:y},{header:l(()=>[e("div",kl,[t(Q,{variant:"text",style:{width:"150px",height:"20px"}}),t(Q,{variant:"text",style:{width:"60px",height:"20px"}})])]),default:l(()=>[e("div",Vl,[t(Q,{variant:"text",style:{width:"100%",height:"16px","margin-bottom":"8px"}}),t(Q,{variant:"text",style:{width:"100%",height:"16px","margin-bottom":"8px"}}),t(Q,{variant:"text",style:{width:"80%",height:"16px","margin-bottom":"16px"}}),e("div",Dl,[t(Q,{variant:"circle",style:{width:"24px",height:"24px"}}),t(Q,{variant:"text",style:{width:"100px",height:"16px","margin-left":"8px"}})]),t(Q,{variant:"text",style:{width:"120px",height:"16px","margin-top":"8px"}}),t(Q,{variant:"text",style:{width:"100px",height:"16px","margin-top":"8px"}}),e("div",zl,[t(Q,{variant:"text",style:{width:"80px",height:"32px"}}),t(Q,{variant:"text",style:{width:"80px",height:"32px"}}),t(Q,{variant:"text",style:{width:"80px",height:"32px"}})])])]),_:1})),64))])]),default:l(()=>[!z.value&&D.value.length>0?(f(),w("div",Sl,[(f(!0),w(X,null,F(D.value,y=>(f(),G(C,{key:y.id,class:"blueprint-card"},{header:l(()=>[e("div",Ul,[e("h2",null,A(y.name||"未命名蓝图"),1),t(J,{size:"small",type:"warning"},{default:l(()=>[c(A(y.area||"未知地区"),1)]),_:2},1024)])]),default:l(()=>[e("div",El,[e("div",Ml,A(y.description||"暂无描述"),1),e("div",Il,[e("div",Ll,[t(K,{size:24},{default:l(()=>[c(A(y.creator?.name?.charAt(0)||"用户"),1)]),_:2},1024),t(g,{size:"small",style:{"margin-left":"8px"}},{default:l(()=>[c(A(y.creator?.name||"未知作者"),1)]),_:2},1024)]),t(g,{size:"small"},{default:l(()=>[c("上传时间: "+A(S(y.createdAt)),1)]),_:2},1024),e("div",Ql,[t(g,{size:"small",style:{"margin-right":"10px"}},{default:l(()=>[c(" 浏览: "+A(y.views||0),1)]),_:2},1024),t(g,{size:"small"},{default:l(()=>[c(" 下载: "+A(y.downloads||0),1)]),_:2},1024)])]),e("div",$l,[t(j,{size:"medium",icon:s(De),onClick:te=>u(y),type:"primary"},{default:l(()=>[..._[5]||(_[5]=[c(" 查看 ",-1)])]),_:1},8,["icon","onClick"]),t(j,{size:"medium",icon:s(fe),onClick:te=>b(y),type:"default",plain:""},{default:l(()=>[..._[6]||(_[6]=[c(" 分享 ",-1)])]),_:1},8,["icon","onClick"]),t(j,{size:"medium",icon:s(ze),onClick:te=>P(y),type:"default",plain:""},{default:l(()=>[..._[7]||(_[7]=[c(" B站 ",-1)])]),_:1},8,["icon","onClick"])])])]),_:2},1024))),128))])):!z.value&&D.value.length===0?(f(),w("div",Rl,[t(i,{description:"暂无符合条件的蓝图"})])):W("",!0)]),_:1},8,["loading"]),!z.value&&q.value>0?(f(),w("div",Tl,[t(Z,{"current-page":T.value,"onUpdate:currentPage":_[2]||(_[2]=y=>T.value=y),"page-size":k.value,"onUpdate:pageSize":_[3]||(_[3]=y=>k.value=y),"page-sizes":[12,24,36],layout:"total, sizes, prev, pager, next, jumper",total:q.value,onSizeChange:L,onCurrentChange:I},null,8,["current-page","page-size","total"])])):W("",!0)])]),_:1})]),_:1})}}},Gl=ne(Pl,[["__scopeId","data-v-04580e08"]]),fs=Object.freeze(Object.defineProperty({__proto__:null,default:Gl},Symbol.toStringTag,{value:"Module"})),ql={class:"stats-section"},Ol={class:"stats-grid"},Wl={class:"stat-item"},jl={class:"stat-content"},Xl={class:"stat-value"},Yl={class:"stat-item"},Fl={class:"stat-content"},Nl={class:"stat-value"},Hl={class:"stat-item"},Kl={class:"stat-content"},Jl={class:"stat-value"},Zl={class:"stat-item"},eo={class:"stat-content"},to={class:"stat-value"},lo={class:"action-filter-section"},oo={class:"filter-section"},so={class:"action-section"},no={class:"blueprint-section"},ao={class:"blueprint-grid"},io={class:"blueprint-header"},ro={class:"blueprint-tags"},uo={class:"blueprint-content"},co={class:"blueprint-actions"},po={key:0,class:"text-center py-8"},mo={key:1,class:"blueprint-grid"},go={class:"blueprint-header"},fo={class:"blueprint-header-actions"},vo={class:"blueprint-tags"},_o={class:"blueprint-content"},Ao={class:"blueprint-description"},ho={class:"blueprint-meta"},yo={key:0,class:"author-info"},xo={class:"blueprint-stats"},wo={class:"blueprint-actions"},bo={key:1,class:"pagination-container"},Co={class:"dialog-footer"},Bo={class:"guide-section"},ko={__name:"self",setup(le){const r=pe(),d=ce(),m=R(""),D=R(["","四号谷地","武陵"]),q=R([{id:1,name:"本地蓝图",description:"本地保存的蓝图",createdAt:"2026-01-10",lastEdited:"2026-01-12",area:"四号谷地/",thumbnail:"#",type:"local"}]),T=R(!1),k=R({name:"",description:"",area:"",file:null}),x=R(!1),o=R(null),z={name:[{required:!0,message:"请输入蓝图名称",trigger:"blur"},{min:1,max:50,message:"名称长度在 1 到 50 个字符",trigger:"blur"}],description:[{required:!0,message:"请输入蓝图描述",trigger:"blur"},{min:1,max:200,message:"描述长度在 1 到 200 个字符",trigger:"blur"}],area:[{required:!0,message:"请选择地区",trigger:"change"}],file:[{required:!0,message:"请选择蓝图文件",trigger:"change"}]},E=R(null),I=R(!1),V=U(()=>r.userInfo.isLoggedIn?[...q.value,...r.allBlueprints]:q.value),L=U(()=>m.value?V.value.filter(g=>g.area===m.value):V.value),b=async g=>{try{g.fileHash?d.push(`/editor/${g.fileHash}`):d.push("/editor")}catch(i){console.error("编辑蓝图失败:",i),B.error("操作失败，请重试")}},u=async g=>{try{if(!g.fileHash){B.warning("本地蓝图不需要重新上传");return}const i=document.createElement("input");i.type="file",i.accept=".json",i.onchange=async $=>{const Z=$.target.files[0];if(Z)try{g.uploading=!0,await de.uploadBlueprint(g.id,Z),await r.loadBlueprints(),B.success("蓝图重新上传成功")}catch(y){B.error(y.message||"蓝图重新上传失败"),console.error("蓝图重新上传失败:",y)}finally{g.uploading=!1}},i.click()}catch(i){console.error("重新上传蓝图失败:",i),B.error("操作失败，请重试")}},P=async g=>{try{if(!g.fileHash){B.warning("本地蓝图无法分享");return}}catch(i){console.error("分享蓝图失败:",i),B.error("操作失败，请重试")}},S=g=>{o.value=g,x.value=!0},h=async()=>{if(o.value)try{await de.deleteBlueprint(o.value.id),await r.loadBlueprints(),x.value=!1,o.value=null,B.success("蓝图删除成功")}catch(g){B.error(g.message||"蓝图删除失败"),console.error("蓝图删除失败:",g)}},_=()=>{x.value=!1,o.value=null},Y=()=>{if(!r.userInfo.isLoggedIn){B.warning("请先登录后再上传蓝图");return}k.value={name:"",description:"",area:"",file:null},T.value=!0},H=U(()=>V.value.length),a=U(()=>r.userInfo.isLoggedIn?r.allBlueprints.length:0),p=U(()=>{const g={四号谷地:0,武陵:0};return V.value.forEach(i=>{g.hasOwnProperty(i.area)&&g[i.area]++}),g}),O=g=>{if(!g)return"未知";try{const i=new Date(g);return`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}-${String(i.getDate()).padStart(2,"0")}`}catch{return"未知"}},j=g=>{g?k.value.file=g.raw:k.value.file=null},ee=async()=>{if(E.value)try{await E.value.validate(),I.value=!0;const g={name:k.value.name,description:k.value.description,area:k.value.area},$=(await de.createBlueprint(g)).data.id;await de.uploadBlueprint($,k.value.file),await r.loadBlueprints(),T.value=!1,B.success("蓝图上传成功")}catch(g){B.error(g.message||"蓝图上传失败"),console.error("蓝图上传失败:",g)}finally{I.value=!1}},Q=()=>{T.value=!1,E.value&&E.value.resetFields()},C=async()=>{r.userInfo.isLoggedIn&&(!Array.isArray(r.allBlueprints)||r.allBlueprints.length===0)&&await r.loadBlueprints()},J=async g=>{await r.loadBlueprints({limit:g,page:1})},K=async g=>{await r.loadBlueprints({page:g})};return se(()=>{C()}),(g,i)=>{const $=n("el-button"),Z=n("el-alert"),y=n("el-card"),te=n("el-option"),M=n("el-select"),N=n("el-skeleton-item"),Se=n("el-empty"),ve=n("el-tag"),ae=n("el-text"),Ue=n("el-avatar"),Ee=n("el-skeleton"),Me=n("el-pagination"),_e=n("el-input"),ie=n("el-form-item"),Ie=n("el-upload"),Le=n("el-form"),Ae=n("el-dialog"),Qe=n("el-col"),$e=n("el-row");return f(),G($e,{gutter:12},{default:l(()=>[t(Qe,{span:24},{default:l(()=>[s(r).userInfo.isLoggedIn?W("",!0):(f(),G(Z,{key:0,title:"请先登录以查看和管理您的蓝图",type:"info",closable:!1,"show-icon":"",class:"mb-4"},{default:l(()=>[t($,{type:"primary",size:"small",onClick:i[0]||(i[0]=v=>g.$emit("openLoginDialog"))},{default:l(()=>[...i[9]||(i[9]=[c("去登录",-1)])]),_:1})]),_:1})),e("div",ql,[t(y,{class:"stats-card"},{default:l(()=>[e("div",Ol,[e("div",Wl,[e("div",jl,[e("div",Xl,A(H.value),1),i[10]||(i[10]=e("div",{class:"stat-label"},"总蓝图数",-1))])]),e("div",Yl,[e("div",Fl,[e("div",Nl,A(a.value),1),i[11]||(i[11]=e("div",{class:"stat-label"},"上传蓝图",-1))])]),e("div",Hl,[e("div",Kl,[e("div",Jl,A(p.value.四号谷地),1),i[12]||(i[12]=e("div",{class:"stat-label"},"四号谷地",-1))])]),e("div",Zl,[e("div",eo,[e("div",to,A(p.value.武陵),1),i[13]||(i[13]=e("div",{class:"stat-label"},"武陵",-1))])])])]),_:1})]),e("div",lo,[e("div",oo,[t(M,{modelValue:m.value,"onUpdate:modelValue":i[1]||(i[1]=v=>m.value=v),placeholder:"按地区筛选",style:{width:"200px"}},{default:l(()=>[(f(!0),w(X,null,F(D.value,v=>(f(),G(te,{key:v,label:v||"全部地区",value:v},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),e("div",so,[t($,{type:"primary",icon:s(xe),onClick:Y,disabled:!s(r).userInfo.isLoggedIn,loading:s(r).loading.blueprints},{default:l(()=>[...i[14]||(i[14]=[c(" 上传蓝图 ",-1)])]),_:1},8,["icon","disabled","loading"])])]),e("div",no,[t(Ee,{loading:s(r).loading.blueprints,animated:""},{template:l(()=>[e("div",ao,[(f(),w(X,null,F(3,v=>t(y,{class:"blueprint-card",key:v},{header:l(()=>[e("div",io,[t(N,{variant:"text",style:{width:"150px",height:"20px"}}),e("div",ro,[t(N,{variant:"text",style:{width:"60px",height:"20px"}}),t(N,{variant:"text",style:{width:"60px",height:"20px"}})])])]),default:l(()=>[e("div",uo,[t(N,{variant:"text",style:{width:"100%",height:"16px","margin-bottom":"8px"}}),t(N,{variant:"text",style:{width:"100%",height:"16px","margin-bottom":"8px"}}),t(N,{variant:"text",style:{width:"80%",height:"16px","margin-bottom":"16px"}}),t(N,{variant:"text",style:{width:"120px",height:"16px","margin-bottom":"5px"}}),t(N,{variant:"text",style:{width:"120px",height:"16px","margin-bottom":"5px"}}),t(N,{variant:"text",style:{width:"100px",height:"16px","margin-bottom":"16px"}}),e("div",co,[t(N,{variant:"text",style:{width:"80px",height:"32px"}}),t(N,{variant:"text",style:{width:"80px",height:"32px"}}),t(N,{variant:"text",style:{width:"80px",height:"32px"}})])])]),_:1})),64))])]),default:l(()=>[!s(r).loading.blueprints&&L.value.length===0?(f(),w("div",po,[t(Se,{description:"暂无蓝图数据"})])):s(r).loading.blueprints?W("",!0):(f(),w("div",mo,[(f(!0),w(X,null,F(L.value,v=>(f(),G(y,{key:v.id,class:"blueprint-card"},{header:l(()=>[e("div",go,[e("h2",null,A(v.name||"未命名蓝图"),1),e("div",fo,[e("div",vo,[t(ve,{size:"small",type:v.fileHash?"success":"info"},{default:l(()=>[c(A(v.fileHash?"已上传":"本地"),1)]),_:2},1032,["type"]),t(ve,{size:"small",type:"warning"},{default:l(()=>[c(A(v.area||"未知地区"),1)]),_:2},1024)]),v.fileHash?(f(),G($,{key:0,size:"small",type:"danger",circle:"",icon:s(Oe),onClick:me=>S(v),class:"delete-button"},null,8,["icon","onClick"])):W("",!0)])])]),default:l(()=>[e("div",_o,[e("div",Ao,A(v.description||"暂无描述"),1),e("div",ho,[t(ae,{size:"small"},{default:l(()=>[c("创建时间: "+A(O(v.createdAt)),1)]),_:2},1024),t(ae,{size:"small"},{default:l(()=>[c("最近编辑: "+A(O(v.lastEdited)),1)]),_:2},1024),v.creator?(f(),w("div",yo,[t(Ue,{size:20},{default:l(()=>[c(A(v.creator?.name?.charAt(0)||"用户"),1)]),_:2},1024),t(ae,{size:"small",style:{"margin-left":"5px"}},{default:l(()=>[c(A(v.creator?.name||"未知作者"),1)]),_:2},1024)])):W("",!0),e("div",xo,[t(ae,{size:"small",style:{"margin-right":"10px"}},{default:l(()=>[c(" 浏览: "+A(v.views||0),1)]),_:2},1024),t(ae,{size:"small"},{default:l(()=>[c(" 下载: "+A(v.downloads||0),1)]),_:2},1024)])]),e("div",wo,[t($,{size:"medium",icon:s(ke),onClick:me=>b(v),type:"primary"},{default:l(()=>[...i[15]||(i[15]=[c(" 编辑 ",-1)])]),_:1},8,["icon","onClick"]),t($,{size:"medium",icon:s(xe),onClick:me=>u(v),loading:v.uploading,disabled:!v.fileHash,type:"primary",plain:""},{default:l(()=>[...i[16]||(i[16]=[c(" 重新上传 ",-1)])]),_:1},8,["icon","onClick","loading","disabled"]),t($,{size:"medium",icon:s(fe),onClick:me=>P(v),disabled:!v.fileHash,type:"default",plain:""},{default:l(()=>[...i[17]||(i[17]=[c(" 分享 ",-1)])]),_:1},8,["icon","onClick","disabled"])])])]),_:2},1024))),128))]))]),_:1},8,["loading"])]),s(r).userInfo.isLoggedIn&&s(r).userBlueprintsTotal>0?(f(),w("div",bo,[t(Me,{"current-page":s(r).userBlueprintsPage,"onUpdate:currentPage":i[2]||(i[2]=v=>s(r).userBlueprintsPage=v),"page-size":s(r).userBlueprintsLimit,"onUpdate:pageSize":i[3]||(i[3]=v=>s(r).userBlueprintsLimit=v),"page-sizes":[10,20,30,50],layout:"total, sizes, prev, pager, next, jumper",total:s(r).userBlueprintsTotal,onSizeChange:J,onCurrentChange:K},null,8,["current-page","page-size","total"])])):W("",!0),t(Ae,{modelValue:T.value,"onUpdate:modelValue":i[7]||(i[7]=v=>T.value=v),title:"上传蓝图",width:"500px","close-on-click-modal":!1},{footer:l(()=>[e("span",Co,[t($,{onClick:Q},{default:l(()=>[...i[20]||(i[20]=[c("取消",-1)])]),_:1}),t($,{type:"primary",loading:I.value,onClick:ee},{default:l(()=>[...i[21]||(i[21]=[c(" 上传 ",-1)])]),_:1},8,["loading"])])]),default:l(()=>[t(Le,{ref_key:"uploadFormRef",ref:E,model:k.value,rules:z,"label-width":"80px"},{default:l(()=>[t(ie,{label:"蓝图名称",prop:"name"},{default:l(()=>[t(_e,{modelValue:k.value.name,"onUpdate:modelValue":i[4]||(i[4]=v=>k.value.name=v),placeholder:"请输入蓝图名称"},null,8,["modelValue"])]),_:1}),t(ie,{label:"蓝图描述",prop:"description"},{default:l(()=>[t(_e,{modelValue:k.value.description,"onUpdate:modelValue":i[5]||(i[5]=v=>k.value.description=v),type:"textarea",placeholder:"请输入蓝图描述",rows:3},null,8,["modelValue"])]),_:1}),t(ie,{label:"地区",prop:"area"},{default:l(()=>[t(M,{modelValue:k.value.area,"onUpdate:modelValue":i[6]||(i[6]=v=>k.value.area=v),placeholder:"请选择地区"},{default:l(()=>[(f(!0),w(X,null,F(D.value,v=>(f(),G(te,{key:v,label:v||"全部地区",value:v},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(ie,{label:"蓝图文件",prop:"file"},{default:l(()=>[t(Ie,{class:"upload-demo",action:"","auto-upload":!1,"on-change":j,limit:1,"file-list":[],accept:".json"},{tip:l(()=>[...i[19]||(i[19]=[e("div",{class:"el-upload__tip"}," 请选择 .json 格式的文件 ",-1)])]),default:l(()=>[t($,{type:"primary"},{default:l(()=>[...i[18]||(i[18]=[c("选择文件",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),t(Ae,{modelValue:x.value,"onUpdate:modelValue":i[8]||(i[8]=v=>x.value=v),title:"确认删除",width:"400px","close-on-click-modal":!1},{footer:l(()=>[e("span",null,[t($,{onClick:_},{default:l(()=>[...i[22]||(i[22]=[c("取消",-1)])]),_:1}),t($,{type:"danger",onClick:h},{default:l(()=>[...i[23]||(i[23]=[c("确认删除",-1)])]),_:1})])]),default:l(()=>[e("p",null,'您确定要删除蓝图 "'+A(o.value?.name||"未命名蓝图")+'" 吗？此操作不可撤销。',1)]),_:1},8,["modelValue"]),e("div",Bo,[t(y,{class:"guide-card"},{header:l(()=>[...i[24]||(i[24]=[e("h3",{style:{margin:"0"}},"使用指南",-1)])]),default:l(()=>[i[25]||(i[25]=e("div",{class:"guide-content"},[e("div",{class:"guide-item"},[e("h4",null,"如何上传蓝图？"),e("p",null,' 点击页面上方的"上传蓝图"按钮，选择你要上传的蓝图文件或创建新蓝图。 ')]),e("div",{class:"guide-item"},[e("h4",null,"如何编辑蓝图？"),e("p",null,'在蓝图卡片下方点击"编辑"按钮，进入蓝图编辑器修改你的布局。')]),e("div",{class:"guide-item"},[e("h4",null,"如何分享蓝图？"),e("p",null,'在蓝图卡片下方点击"分享"按钮，生成分享链接或二维码。')])],-1))]),_:1})])]),_:1})]),_:1})}}},Vo=ne(ko,[["__scopeId","data-v-2c75d8ab"]]),vs=Object.freeze(Object.defineProperty({__proto__:null,default:Vo},Symbol.toStringTag,{value:"Module"})),Do={};function zo(le,r){return f(),w("h1",null,"calculate")}const So=ne(Do,[["render",zo]]),_s=Object.freeze(Object.defineProperty({__proto__:null,default:So},Symbol.toStringTag,{value:"Module"})),Uo="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAAsTAAALEwEAmpwYAAADkUlEQVR4nO3bW4hbRRzH8U/WtUi1VQoFa7VgKbQKxQcriMiqD14QK4rVB0W8tBV8sbagCCoqiKAg9NULFUW8VCyiVHwRC2rBC9pa7UMpRfuyyuLiKvVWNT7MLpxOTjZnszl7cmbzg5D8//nPzH++JDOTmUmj2WyazxqqOoGqNQBQdQJVawCg6gSq1nCngBXLlk29vAFbcBFOLS+lnup3LMzYE0dHR8/IBnQEMKmn8WCPkppLLYzsn+OAIl+B69Wz83n6L3YUAXB/7/OoTEtiRxEAF0b2BWjU5HFflPtb3QBYHNnfFCjTLzo3sr+PA1KfBs+L7MNxQOoA1kb2gTggZQBnYXnG/sM8+wRcHtlf4984aD4B+CQvKGUAV0T2p3lBqQI4G6sy9nHsyQtMFcD6yN6LX/MCUwVwc2S/1y4wRQDLMZKxm3i7XXCKAO7ASRn7czlL4CmlBmAIGyPfS50KpKT1WJmxj+H16QqkBmBrZL+mzeg/pZQAjOCyjN3E9k6FUgLwRGS/j4OdCqUC4Fonrv2beLxIwRQADOPZyLcbXxYpnAKAbViTsf/BQ0UL1x3ASjwW+V7Ad0UrqDOAIbzoxMOPMTw600rqqq1af/Nvk3P6M53qCuBiPBX5duPVmVZURwBLsRMLMr4xbOqmsroBWIBdOCfjawqd/7GbCusEoIEduDTyP4N3u620TgC247bI9yEenk2ldQHwpNaDzm9xk5y9/pmo6AWJqtQQLmc8EPlHcSMmZttAPwMYxnO4O/KP42o5x1zdNtKPWow3cU3kH8dVcg45u1U/AliDd7A68o8Jnd/Xy8b6bRC8HZ9p7fwRYfrb1+sG+wXAEmEZ+4rWGylf4BIcKqPhfgCwQfj5Gs/x8LKw1/dTWY1XCeB8fCBcXDozeu9P3Is7J1+XpioGwRV4BHe1af8AbhUWOqVrLj8Bq4XdmkPYrLXzx4UV3zpz1Hk5SfRaJ+M63CNMYe2A7xEuZO4vOZ8WlQFgWJiybhEGuKXTxB4WtrDeKCGPQuoFgCFhQBsRtqiuxOkdyvwg7OjsEHZxK1MRAL9hUcbeINzAXCXcw1uL0wq295Wwh79TxR2fUhEAiyK75b5tB01MlnleWNT0lcoaBMeFs7ldk89/ldTOrNUrAL8I19D24iPhVsasNirmSkUAHMPfwjx9Cj4WBrEjwpy+H0fLSrBsNQb/HJ3nGgCoOoGqNQBQdQJV638pNI9iwTijKwAAAABJRU5ErkJggg==",Eo="data:image/png;base64,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",Mo="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB60lEQVR4nO2bTUrDQBiGn4rdqLjvpjcoCuK+XkD0JNaFLryACOLPSRQ8gAeQIogn6Kb7+rPpoi5iIR1LnU4meVPme6DQGb4Mb97Ml8yXdhqTyYSUWVMLUGMGqAWoMQPUAtSs/xfQbrWmX4+AE2Af2CxPUlS+gBfgHngEGAyHMwG+M+AKeAC6rM7JQ6a1S6b9Zl6AjwGHwHk8TTJOyWbxDD4G9GIrEdJzO3wM2HPaO0BjRT4dIL/Udc/Fy4Btp/3mcUxdeAdGufaWG5D8Y9AMUAtQ8+9CqAJi1eONkIPqYADf4zEAG83mTNuX6XEhWAqoBcyjyBVdljoaEJTLoSSfAskbUCgF3No6hNz7htLGXETyM8AMUAtQYwaoBahJ3oBoK8F2qxWlqgsdZzAc6qvBZas4mL/ut2qwQqLOgFhV3EpWg6E56OZ86DihJJ8CZoBagBozQC1AjRmgFqDGDFALUFNoJbjMy0flmIuo4w8joWW1vhyOhZXDFVKLGeBewZUshwtQafnrknwKmAFqAWrMAI+YkdPeLUFHWXSY/afrpxvg8xToAwe59mtBUUr6bofPDLgtQYiKO7fDx4An4DK6lOq55nfXSB7fm+AF2WaDZ/7eE+rMB5nmY+BsXkDDdo4mjhmgFqDGDFALUPMD695JL+Bvx7QAAAAASUVORK5CYII=",Io="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB60lEQVR4nO2bTUrDQBiGn4rdqLjPpjcoCuK+XkD0JNaFLryACOLPSRQ8gAeQIogn6Kb7+rPpoi5iIR1rO00meVPme6DQCV8+3ryZL5mZJI3xeEzMrKkFqDED1ALUmAFqAWrWFwW0kmTy9wg4AfaBzfIkBeULeAHugUeA/mAwFeDbA66AB6DD6hw8pFo7pNpvZgX4GHAInIfTJOOUtBdP4WNAN7QSIV13g48Be057B2isyK8NZIe67rF4GbDttN889qkL78Aw095yA6K/DZoBagFqFg6EliDUvLoRKI8XIQ3gezRaKn6j2Zzab9KuEiuBkMkUZ7AoIQ3IW7vSNbnoSyB6AwqVgDu3zkNmvaG0nPOIvgeYAWoBaswAtQA1ZoBagJpgQ+FWkgQZ0ubN0x8Mcg3FazEdLpLjvzy+WAmETBZiOlz1lDqYAXlr0K35vHnyEn0JmAFqAWrMALUANWaAWoCa6A0oNBBaZvFRmXMedXw4Wim1mw1WjV0DQibLe0aVPaEOD0elRF8CZoBagBozwCNm6LR3S9BRFm2m33T9dAN87gI94CDTfi0oSknP3eDTA25LEKLizt3gY8ATcBlcSvVc8/vVSBbfi+AF6ccGz/y9JtSZD1LNx8DZrICGfTkaOWaAWoAaM0AtQM0PXDhKLQct+HoAAAAASUVORK5CYII=",Lo="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB3ElEQVR4nO2bT0rDQBTGfxG7UXGfTW9QFMR9vYDoSawLXXgBEcQ/J1HwAB5AiiCeoJvsq3bTRV1EIR1LOzaTfCnzflDoDK8vX77OJHnJJJlMJsTMmlqAGjNALUCNGaAWoGZ9UUA7TX+/HgEnwD6wWZ2koHwBL8A98AgwyLKpAN8RcAU8AF1WZ+ch19ol134zK8DHgEPgPJwmGafko3gKHwN6oZUI6bkdPgbsOe0dIFmRTwcoXuq6++JlwLbTfvP4TVN4B4aF9pYbEP1p0AxQC1Cz8EKoBtx6PKlz440YAaPxmNF4LNl2IwxQYgaoBagxA9QC1JQ6Dbq19TIU7jdUlnMe0Y8AM0AtQI0ZoBagJnoDglWD7TT1fso6yDKviq+KnC5By2Gfim6j1ZLnLGJTIGSyMv9EnTmLBDNg2TlYd06X6KeAGaAWoMYMUAtQYwaoBagxA9QC1JS6EvzPzUdlznlEPwLMALUANU1YH1B5yTuPJhhQ64IIl+ingBmgFqDGDPCIGTrt3Qp0VEWH6ZWun26Az1mgDxwU2q8lRSnpux0+I+C2AiEq7twOHwOegMvgUurnmp+3Ror4HgQvyF82eObvMaHJfJBrPgbOZgUk9uZo5JgBagFqzAC1ADXfNPBGNmGUbGIAAAAASUVORK5CYII=",Qo="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAABRElEQVR4nO2YTUrDQBSAv1WOUX9A3LYBL6D1Qi4EXXWjC8Ft8RY9j4pou1asuChCITLwCo8QsZlpZyb6PhgySWbmvW8yQ0jAMAzjr3IIzIAX4IAOcglUUi7oICMl4OqdY2QCiTGB1JhAakwgNSaQGhNIjQmkxgRisQ88Ak9AuYZAKW2nuXxqnqlE35REk0ApbVbXz8mA3VpSrj5oEBg0tNsjE+oz6+oTdT5puK+XWxb0gVeV5E/lHTgiU/q/SERN/hZYADeByylk2VwDn8AVHnxJYHfcxJ7wWfML6e+OrdGz54NL+AG4D9iwVUgOoQKboPrXAkvVuSA+hYrvcmnNTA1wTHyGKr77Rd+aOzXAswwY40kUwKnEXMUf+wy0A3ys8WbddpkDPd/ZGCaWmAMnBNKTRzitbextlaXEGofMvGEYBlH4BpNrDdd04vp9AAAAAElFTkSuQmCC",$o="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAzklEQVR4nO2XzQ2CQBCFvxMdYPRmHdqfYD1YCR5sAGxjjMkYN0SWvxmJcV/ybrP7vuzCMEDSWxlwBu6AGLsFSs3oVekQ3HURA2i16IC9jsFJ9ErUXhrcXxIA0wFyoAL2awDkQK1rqm8D5EH4DdiOXLeM0DN8LIBb+BgA1/AhgDB8qX8T4NMV7DCWzHgITSFk5mtoBiELGpEJhExsxRvgulYrDiEua32MpioByND+rRY8B0ivobSJFRUOY3jXpxhAphCvk7B0o+HRH5Ok/9QDqkLlK3CTctIAAAAASUVORK5CYII=",Ro="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAzUlEQVR4nO2XwQ3CMAxF36kbgODWOWA+KOzTSeDAAg1rGCEZgZCSNJETJJov+eb6P6WJ40DTWx1wBu6AGIcDBvXw6lTA+DuOIQCnSTvstf9YCa9Eo5Si9aUBYAPQAyOwTv1QjABGrXNNhRAjgBVw0Vo3YFsbIBtCjDdhMoQUOAVJEBIBsGjFQQipBLDJBbD4BV7zGpswaF76GEbNSzaiWeZ/1Yr7X19GPi1nHsiu7zThOUCWGkqnUNJQYSw/hAA6hXithGVMah58mDQtUw91bd1GCwtMLwAAAABJRU5ErkJggg==",To={style:{height:"60%"}},Po={class:"display-flex flex-direation-col sheng-cont-list sidebar"},Go=["data-gs-widget"],qo={class:"display-flex flex-direation-col justify-content-center",style:{"margin-left":"3px"}},Oo={class:"display-flex flex-direation-col justify-content-center"},Wo={style:{"font-size":"14px"}},jo={class:"display-flex flex-direation-row sheng-tool-bar-cont"},Xo={class:"sheng-tool-bar display-flex flex-direaiton-row"},Yo={style:{"margin-right":"12px"}},Fo={class:"layer-dropdown",style:{"border-radius":"4px",overflow:"hidden"}},No={class:"layer-item"},Ho={class:"layer-item"},Ko={class:"layer-item"},Jo={class:"layer-item"},Zo={style:{"margin-right":"12px"}},es={class:"module-filter-dropdown",style:{"border-radius":"4px",overflow:"hidden"}},ts={style:{flex:"1",display:"flex","align-items":"center"}},ls={style:{"margin-left":"3px"}},os={class:"item-actions"},ss={class:"layer-item",style:{"background-color":"#f9f9f9"}},ns={class:"item-actions"},as={__name:"simulation",setup(le){const{appContext:r}=We(),d=Je(),m=Ze(),D=ge(),q=D.params.hashCode;se(async()=>{await je();const x=document.querySelector("#grid-stack"),o=document.querySelector(".sheng-cont-grid"),z=document.querySelector(".selection-box"),E=document.querySelector(".sheng-overlay"),I=document.querySelector("#pipe-grid");if(m.initSelector(z),d.initGrid(x,o,E,r),d.initPipeGrid(I),q)try{B.info(`正在加载蓝图: ${q}`),await d.loadBlueprintByHashCode(q),B.success(`蓝图 ${q} 加载成功！`)}catch(L){console.error("加载蓝图失败：",L),B.error(`加载蓝图失败: ${L.message}`)}else try{d.loadLocalBlueprint()&&B.success("本地蓝图加载成功！")}catch(L){console.error("加载本地蓝图失败：",L),B.error(`加载本地蓝图失败: ${L.message}`)}const V=L=>{const b=L.cloneNode(!0);b.replaceChildren(),b.classList.remove("sheng-cont-item","sheng-cont-item-spec");const u=JSON.parse(b.getAttribute("data-gs-widget")),S=`${u.id}_${Date.now()}_${Math.floor(Math.random()*1e3)}`;return u.id=S,b.setAttribute("data-gs-widget",JSON.stringify(u)),b};d.rootGrid.on("dropped",(L,b,u)=>{if(!d.rootPipeGrid.isAreaEmpty(u.x,u.y,u.w,u.h)){d.rootGrid.removeWidget(u.el,!0),B.error("该位置已被占用，请选择其他位置");return}}),d.rootGrid.on("added",(L,b)=>{const u=b[0],P=u.el,S=u.id.split("_")[0];if(!P.classList.contains("sidebar-item"))return;d.gridWidgets[u.id]={rotate:0,recipe:"",part:d.editPartChoose},d.gridWidgetElements[u.id]=P,d.partsWidgetId[d.editPartChoose].add(u.id);const h=t(lt[S],{gs_id:u.id,el_name:S,el_size:{w:u.w,h:u.h}});h.appContext=r,Xe(h,P)}),Ye.setupDragIn(".sidebar-item",{helper:V})});const T=Ce(()=>D.params.hashCode,async(x,o)=>{if(d.clearBlueprint(),x&&x!==o)try{B.info(`正在加载蓝图: ${x}`),await d.loadBlueprintByHashCode(x),B.success(`蓝图 ${x} 加载成功！`)}catch(z){console.error("加载蓝图失败：",z),B.error(`加载蓝图失败: ${z.message}`)}else if(!x&&o)try{B.info("正在加载本地蓝图..."),d.loadLocalBlueprint()?B.success("本地蓝图加载成功！"):B.info("无本地蓝图数据")}catch(z){console.error("加载本地蓝图失败：",z),B.error(`加载本地蓝图失败: ${z.message}`)}}),k=()=>{Ke.confirm("你确定要清空画布吗？确认后会直接清空画布，若清空后保存将会彻底无法恢复。",{confirmButtonText:"我确认清空画布",cancelButtonText:"取消",type:"warning"}).then(()=>{B({type:"success",message:"已经清空画布"}),d.clearBlueprint()}).catch(()=>{B({type:"info",message:"清空画布已取消"})})};return Be(()=>{T()}),(x,o)=>{const z=n("el-popconfirm"),E=n("el-dialog"),I=n("upload-filled"),V=n("el-icon"),L=n("el-upload"),b=n("el-col"),u=n("el-radio-button"),P=n("el-radio-group"),S=n("el-button"),h=n("el-switch"),_=n("el-dropdown"),Y=n("el-button-group"),H=n("el-row");return f(),w(X,null,[t(z,{title:"确认删除当前框选的所有传送带/管道？",visible:s(m).showSelectMenu,placement:"right-end",onCancel:s(m).hideSelectorAMenu,onConfirm:s(m).confirmDelete,onHide:s(m).handleMenuHide},{reference:l(()=>[Fe(e("div",{class:"selection-box",onMousedown:o[0]||(o[0]=(...a)=>s(m).handleMouseDown&&s(m).handleMouseDown(...a)),onMousemove:o[1]||(o[1]=(...a)=>s(m).handleMouseMove&&s(m).handleMouseMove(...a)),onMouseup:o[2]||(o[2]=(...a)=>s(m).handleMouseUp&&s(m).handleMouseUp(...a))},null,544),[[Ne,s(m).isStartSelect]])]),_:1},8,["visible","onCancel","onConfirm","onHide"]),t(E,{modelValue:s(d).isRecipeChoose,"onUpdate:modelValue":o[3]||(o[3]=a=>s(d).isRecipeChoose=a),width:"50%",onClose:s(d).handleDialogRecipeClose,"append-to-body":!0},{default:l(()=>[e("div",To,[t(et)])]),_:1},8,["modelValue","onClose"]),t(E,{modelValue:s(d).isWareHouseRecipeChoose,"onUpdate:modelValue":o[4]||(o[4]=a=>s(d).isWareHouseRecipeChoose=a),width:"50%",onClose:s(d).handleDialogRecipeClose,"append-to-body":!0},{default:l(()=>[t(tt)]),_:1},8,["modelValue","onClose"]),t(E,{modelValue:s(d).isBluePrintImport,"onUpdate:modelValue":o[5]||(o[5]=a=>s(d).isBluePrintImport=a),width:"50%",onClose:s(d).handleDialogRecipeClose,"append-to-body":!0},{default:l(()=>[t(L,{drag:"",accept:".json,application/json","on-change":s(d).handleBluePrintUpload},{default:l(()=>[t(V,{class:"el-icon--upload"},{default:l(()=>[t(I)]),_:1}),o[20]||(o[20]=e("div",{class:"el-upload__text"},[c(" 拖动蓝图文件到此处 "),e("em",null,"或者点击上传")],-1))]),_:1},8,["on-change"])]),_:1},8,["modelValue","onClose"]),t(H,{gutter:6},{default:l(()=>[t(b,{span:4},{default:l(()=>[e("div",Po,[o[21]||(o[21]=e("div",{"data-gs-widget":'{"w":9, "h":9, "noResize":true, "id":"protocolCore"}',class:"sheng-cont-item sidebar-item display-flex flex-direation-row"},[e("div",{class:"display-flex flex-direation-col justify-content-center",style:{"margin-left":"3px"}},[e("div",{class:"display-flex flex-direation-col justify-content-center"},[e("span",{style:{"font-size":"14px"}},"协议核心")])])],-1)),o[22]||(o[22]=e("div",{"data-gs-widget":'{"w":3, "h":1, "noResize":true, "id":"warehouseWithdrawalPort"}',class:"sheng-cont-item sidebar-item display-flex flex-direation-row"},[e("div",{class:"display-flex flex-direation-col justify-content-center",style:{"margin-left":"3px"}},[e("div",{class:"display-flex flex-direation-col justify-content-center"},[e("span",{style:{"font-size":"14px"}},"仓库取货口")])])],-1)),o[23]||(o[23]=e("div",{"data-gs-widget":'{"w":3, "h":1, "noResize":true, "id":"warehouseDepositPort"}',class:"sheng-cont-item sidebar-item display-flex flex-direation-row"},[e("div",{class:"display-flex flex-direation-col justify-content-center",style:{"margin-left":"3px"}},[e("div",{class:"display-flex flex-direation-col justify-content-center"},[e("span",{style:{"font-size":"14px"}},"仓库存货口")])])],-1)),o[24]||(o[24]=e("div",{"data-gs-widget":'{"w":2, "h":2, "noResize":true, "id":"powerSupplier"}',class:"sheng-cont-item sidebar-item display-flex flex-direation-row"},[e("div",{class:"display-flex flex-direation-col justify-content-center",style:{"margin-left":"3px"}},[e("div",{class:"display-flex flex-direation-col justify-content-center"},[e("span",{style:{"font-size":"14px"}},"供电桩")])])],-1)),o[25]||(o[25]=e("div",{"data-gs-widget":'{"w":3, "h":3, "noResize":true, "id":"protocolStorageBox"}',class:"sheng-cont-item sidebar-item display-flex flex-direation-row"},[e("div",{class:"display-flex flex-direation-col justify-content-center",style:{"margin-left":"3px"}},[e("div",{class:"display-flex flex-direation-col justify-content-center"},[e("span",{style:{"font-size":"14px"}},"协议存储箱")])])],-1)),o[26]||(o[26]=e("div",{"data-gs-widget":'{"w":3, "h":3, "noResize":true, "id":"liquidContainer"}',class:"sheng-cont-item sidebar-item display-flex flex-direation-row"},[e("div",{class:"display-flex flex-direation-col justify-content-center",style:{"margin-left":"3px"}},[e("div",{class:"display-flex flex-direation-col justify-content-center"},[e("span",{style:{"font-size":"14px"}},"储液罐")])])],-1)),(f(!0),w(X,null,F(s(ot),a=>(f(),w("div",{"data-gs-widget":s(st)(a),class:"sheng-cont-item sidebar-item display-flex flex-direation-row",style:{position:"relative"}},[e("div",{class:"sheng-cont-item-bg",style:re(s(be)(a.icon,120,"#ffffff00"))},null,4),e("div",qo,[e("div",{style:re([{width:"35px",height:"35px","background-size":"420px auto","margin-left":"6px"},s(be)(a.icon,35)])},null,4)]),e("div",Oo,[e("span",Wo,A(a.name),1)])],8,Go))),256))])]),_:1}),t(b,{span:20},{default:l(()=>[e("div",jo,[e("div",Xo,[t(P,{modelValue:s(d).toolbarMode,"onUpdate:modelValue":o[6]||(o[6]=a=>s(d).toolbarMode=a),size:"default",class:"toolbar-section"},{default:l(()=>[t(u,{label:"多带",value:"belts"}),t(u,{label:"框选",value:"select"}),t(u,{label:"无",value:"default"})]),_:1},8,["modelValue"]),t(P,{modelValue:s(d).toolbarMode,"onUpdate:modelValue":o[7]||(o[7]=a=>s(d).toolbarMode=a),size:"default",class:"toolbar-section"},{default:l(()=>[t(u,{label:"转弯带",value:"turn"},{default:l(()=>[...o[27]||(o[27]=[e("div",{class:"toolbar-icon-wrapper"},[e("img",{src:Uo,style:{width:"18px",height:"18px"}})],-1)])]),_:1}),t(u,{label:"带",value:"belt"},{default:l(()=>[...o[28]||(o[28]=[e("div",{class:"toolbar-icon-wrapper"},[e("img",{src:Eo,style:{width:"18px",height:"18px"}})],-1)])]),_:1}),t(u,{label:"一分三",value:"splitter"},{default:l(()=>[...o[29]||(o[29]=[e("div",{class:"toolbar-icon-wrapper"},[e("img",{src:Mo,style:{width:"18px",height:"18px"}})],-1)])]),_:1}),t(u,{label:"三合一",value:"conveyer"},{default:l(()=>[...o[30]||(o[30]=[e("div",{class:"toolbar-icon-wrapper"},[e("img",{src:Io,style:{width:"18px",height:"18px"}})],-1)])]),_:1}),t(u,{label:"桥",value:"cross"},{default:l(()=>[...o[31]||(o[31]=[e("div",{class:"toolbar-icon-wrapper"},[e("img",{src:Lo,style:{width:"18px",height:"18px"}})],-1)])]),_:1})]),_:1},8,["modelValue"]),e("div",Yo,[t(P,{modelValue:s(d).quickPlaceMode,"onUpdate:modelValue":o[8]||(o[8]=a=>s(d).quickPlaceMode=a),size:"small"},{default:l(()=>[t(u,{label:"belt",value:"belt"},{default:l(()=>[...o[32]||(o[32]=[c("传送带",-1)])]),_:1}),t(u,{label:"pipe",value:"pipe"},{default:l(()=>[...o[33]||(o[33]=[c("管道",-1)])]),_:1})]),_:1},8,["modelValue"])]),t(S,{style:{"margin-left":"auto"},icon:"Delete",onClick:k},{default:l(()=>[...o[34]||(o[34]=[c("清空",-1)])]),_:1}),e("div",null,[t(_,{trigger:"click"},{dropdown:l(()=>[e("div",Fo,[e("div",No,[o[36]||(o[36]=e("span",null,"供电范围",-1)),t(h,{modelValue:s(d).isShowSupplierExtent,"onUpdate:modelValue":o[9]||(o[9]=a=>s(d).isShowSupplierExtent=a),size:"small",checked:!1},null,8,["modelValue"])]),e("div",Ho,[o[37]||(o[37]=e("span",null,"传送带",-1)),t(h,{modelValue:s(d).isShowBelts,"onUpdate:modelValue":o[10]||(o[10]=a=>s(d).isShowBelts=a),size:"small",checked:!0},null,8,["modelValue"])]),e("div",Ko,[o[38]||(o[38]=e("span",null,"管道",-1)),t(h,{modelValue:s(d).isShowPipes,"onUpdate:modelValue":o[11]||(o[11]=a=>s(d).isShowPipes=a),size:"small",checked:!0},null,8,["modelValue"])]),e("div",Jo,[o[39]||(o[39]=e("span",null,"液体管口",-1)),t(h,{modelValue:s(d).isShowPipePort,"onUpdate:modelValue":o[12]||(o[12]=a=>s(d).isShowPipePort=a),size:"small",checked:!0},null,8,["modelValue"])])])]),default:l(()=>[t(S,null,{default:l(()=>[o[35]||(o[35]=c(" 图层设置",-1)),t(V,{class:"el-icon--right"},{default:l(()=>[t(s(we))]),_:1})]),_:1})]),_:1})]),e("div",Zo,[t(_,{trigger:"click"},{dropdown:l(()=>[e("div",es,[(f(!0),w(X,null,F(s(d).parts,(a,p)=>(f(),w("div",{key:p,class:"layer-item"},[e("div",ts,[t(h,{modelValue:a.show,"onUpdate:modelValue":O=>a.show=O,size:"small",onChange:O=>s(d).handlePartShowChange(a,O)},null,8,["modelValue","onUpdate:modelValue","onChange"]),e("span",ls,A(a.name),1)]),e("div",os,[t(S,{size:"small",icon:"EditPen",type:a.name===s(d).editPartChoose?"primary":"",onClick:O=>s(d).selectEditPart(a.name),round:""},null,8,["type","onClick"]),t(S,{size:"small",icon:"DocumentCopy",round:"",onClick:O=>s(d).copyEditCode(p)},null,8,["onClick"]),t(S,He({ref_for:!0},{disabled:p===0},{size:"small",icon:"Delete",round:"",onClick:O=>s(d).deletePart(p)}),null,16,["onClick"])])]))),128)),e("div",ss,[o[41]||(o[41]=e("div",{style:{flex:"1",display:"flex","align-items":"center"}},[e("span",{style:{"font-weight":"500"}},"添加新模块")],-1)),e("div",ns,[t(S,{size:"small",icon:"EditPen",round:"",disabled:""}),t(S,{size:"small",icon:"DocumentCopy",round:"",disabled:""}),t(S,{size:"small",type:"primary",icon:"Plus",round:"",onClick:s(d).addNewPart},null,8,["onClick"])])])])]),default:l(()=>[t(S,null,{default:l(()=>[o[40]||(o[40]=c(" 模块滤镜",-1)),t(V,{class:"el-icon--right"},{default:l(()=>[t(s(we))]),_:1})]),_:1})]),_:1})]),t(Y,{style:{overflow:"hidden"}},{default:l(()=>[t(S,{onClick:s(d).saveBluePrint,primary:""},{icon:l(()=>[...o[42]||(o[42]=[e("div",null,[e("img",{src:Qo,style:{width:"18px",height:"18px"}})],-1)])]),_:1},8,["onClick"]),t(S,{onClick:s(d).handleBluePrintImportDialog,primary:""},{default:l(()=>[...o[43]||(o[43]=[e("img",{src:$o,style:{width:"18px",height:"18px"}},null,-1)])]),_:1},8,["onClick"]),t(S,{onClick:s(d).exportBluePrint,primary:""},{default:l(()=>[...o[44]||(o[44]=[e("img",{src:Ro,style:{width:"18px",height:"18px"}},null,-1)])]),_:1},8,["onClick"])]),_:1})])]),e("div",{class:"sheng-cont-grid",onWheel:o[15]||(o[15]=(...a)=>s(d).handleScalingChange_&&s(d).handleScalingChange_(...a)),onContextmenu:o[16]||(o[16]=(...a)=>s(oe).handleRightClick&&s(oe).handleRightClick(...a)),onMousedown:o[17]||(o[17]=(...a)=>s(m).handleMouseDown&&s(m).handleMouseDown(...a)),onMousemove:o[18]||(o[18]=(...a)=>s(m).handleMouseMove&&s(m).handleMouseMove(...a)),onMouseup:o[19]||(o[19]=(...a)=>s(m).handleMouseUp&&s(m).handleMouseUp(...a))},[o[45]||(o[45]=e("div",{class:"sheng-overlay"},null,-1)),e("div",{onClick:o[13]||(o[13]=(...a)=>s(oe).handleLeftClick&&s(oe).handleLeftClick(...a)),class:"pipe-grid",id:"pipe-grid",style:re([{"background-color":"transparent"},{pointerEvents:s(d).quickPlaceMode==="pipe"?"auto":"none"}])},null,4),e("div",{onClick:o[14]||(o[14]=(...a)=>s(oe).handleLeftClick&&s(oe).handleLeftClick(...a)),id:"grid-stack",class:"grid-stack bottom-grid-bg",style:re([{"background-color":"transparent"},{pointerEvents:s(d).quickPlaceMode==="belt"?"auto":"none"}])},null,4)],32)]),_:1})]),_:1})],64)}}},is=ne(as,[["__scopeId","data-v-8f6506d4"]]),As=Object.freeze(Object.defineProperty({__proto__:null,default:is},Symbol.toStringTag,{value:"Module"}));export{ps as _,As as a,_s as c,fs as d,ms as h,gs as i,vs as s};
